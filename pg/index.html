<button>Pagar.me</button>

<script src="checkout.js"></script>
<script>
  var checkout

  isPagarMeLoaded(function () {
    checkout = new PagarMeCheckout.Checkout({
      encryption_key: "ek_test_f9cws0bU9700VqWE4UDuBlKLbvX4IO",
      success: function (data) {
        console.log(data)
      }
    })

    openCheckout()
  })

  function openCheckout() {
    var params = {
      customerData: 'true',
      amount: '100000',
      createToken: 'true',
      interestRate: 10,
      freeInstallments: 3,
      customerData: 'false',
      creditCardDiscountAmount: 1000,
      boletoDiscountAmount: 1000,
      boletoInstallment: 'true',
      boletoMaxInstallments: '12',
      maxInstallments: 12,
    }

    checkout.open(params)
  }

  // enable buy button when user has agreed with the terms
  var button = document.querySelector('button')

  button.addEventListener('click', function () {
    openCheckout()
  })

  function isPagarMeLoaded(callback) {
    if (typeof window.PagarMeCheckout !== 'undefined' && typeof PagarMeCheckout.Checkout === 'function') {
      callback()
    } else {
      setTimeout(function waitPagarMe() {
        isPagarMeLoaded(callback)
      }, 50)
    }
  }


</script>
